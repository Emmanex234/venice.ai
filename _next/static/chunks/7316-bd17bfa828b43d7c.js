!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="256eece6-8985-4e62-bd71-d25df2cb795e",e._sentryDebugIdIdentifier="sentry-dbid-256eece6-8985-4e62-bd71-d25df2cb795e")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7316],{27316:function(e,t,r){r.d(t,{aU:function(){return X},UG:function(){return W},fC:function(){return x}});var n=r(82567),a=r(15063),i=r(9987),s=r(67158),o=r(85022),l=r(80548),d=r(2265),c=r(3921),u=r(1875),p=r(25181),g=r(40211),m=r(55035),f=r(40704),v=r(46232),h='const respond=r=>{self.postMessage(r)},workerToTabIds={};self.addEventListener("message",r=>{const e=r.data;switch(e.type){case"setTimeout":workerToTabIds[e.id]=setTimeout(()=>{respond({id:e.id})},e.ms);break;case"clearTimeout":workerToTabIds[e.id]&&(clearTimeout(workerToTabIds[e.id]),delete workerToTabIds[e.id]);break;case"setInterval":workerToTabIds[e.id]=setInterval(()=>{respond({id:e.id})},e.ms);break;case"clearInterval":workerToTabIds[e.id]&&(clearInterval(workerToTabIds[e.id]),delete workerToTabIds[e.id]);break}});\n',E=(e,t={})=>{if("undefined"==typeof Worker)return null;try{let r=new Blob([e],{type:"application/javascript; charset=utf-8"}),n=globalThis.URL.createObjectURL(r);return new Worker(n,t)}catch(e){return console.warn("Clerk: Cannot create worker from blob. Consider adding worker-src blob:; to your CSP"),null}},b=()=>{let e=globalThis.setTimeout.bind(globalThis);return{setTimeout:e,setInterval:globalThis.setInterval.bind(globalThis),clearTimeout:globalThis.clearTimeout.bind(globalThis),clearInterval:globalThis.clearInterval.bind(globalThis),cleanup:v.Z}},T=()=>{let e=0,t=()=>e++,r=new Map,n=(e,t)=>null==e?void 0:e.postMessage(t),a=e=>{var t;null==(t=r.get(e.data.id))||t()},i=E(h,{name:"clerk-timers"});if(null==i||i.addEventListener("message",a),!i)return b();let s=()=>{i||null==(i=E(h,{name:"clerk-timers"}))||i.addEventListener("message",a)};return{setTimeout:(e,a)=>{s();let o=t();return r.set(o,e),n(i,{type:"setTimeout",id:o,ms:a}),o},setInterval:(e,a)=>{s();let o=t();return r.set(o,e),n(i,{type:"setInterval",id:o,ms:a}),o},clearTimeout:e=>{s(),r.delete(e),n(i,{type:"clearTimeout",id:e})},clearInterval:e=>{s(),r.delete(e),n(i,{type:"clearInterval",id:e})},cleanup:()=>{i&&(i.terminate(),i=null,r.clear())}}};r(84301);var y=r(57437),R=r(37053),k=new Set(["firstName","lastName","emailAddress","username","password","phoneNumber","legalAccepted"]);function S(e){let t={};return e.forEach(({value:e,checked:r,type:n},a)=>{k.has(a)&&void 0!==e&&"checkbox"!==n&&(t[a]=e),k.has(a)&&void 0!==r&&"checkbox"===n&&(t[a]=r)}),t}var A=(0,p.cY)({actors:{attempt:(0,g.p4)(({input:{fields:e,parent:t}})=>{let r=S(e);return t.getSnapshot().context.clerk.client.signUp.update(r)})},actions:{setFormErrors:({context:e,event:t})=>{(0,i.Ff)(t),e.formRef.send({type:"ERRORS.SET",error:t.error})},markFormAsProgressive:({context:e})=>{let t=e.parent.getSnapshot().context.clerk.client.signUp,r=t.missingFields.map(u.TD),n=t.optionalFields.map(u.TD),a=t.requiredFields.map(u.TD),i=new Map;for(let e of a.concat(n))e in t&&i.set(e,t[e]);e.formRef.send({type:"MARK_AS_PROGRESSIVE",missing:r,optional:n,required:a,defaultValues:i})},unmarkFormAsProgressive:({context:e})=>e.formRef.send({type:"UNMARK_AS_PROGRESSIVE"}),sendToNext:({context:e,event:t})=>e.parent.send({type:"NEXT",resource:t.output}),sendToLoading:i.XN},guards:{isStatusMissingRequirements:({context:e})=>{var t,r,n;return(null==(n=null==(r=null==(t=e.parent.getSnapshot().context.clerk)?void 0:t.client)?void 0:r.signUp)?void 0:n.status)==="missing_requirements"},hasMetPreviousMissingRequirements:({context:e})=>{let t=e.parent.getSnapshot().context.clerk.client.signUp,r=e.formRef.getSnapshot().context.fields,n=t.missingFields.map(u.TD);return 0===Array.from(e.formRef.getSnapshot().context.fields.keys()).filter(e=>{var t,a;return!n.includes(e)&&!(null==(t=r.get(e))?void 0:t.value)&&!(null==(a=r.get(e))?void 0:a.checked)}).length}},types:{}}).createMachine({id:"SignUpContinue",context:({input:e})=>({basePath:e.basePath||i.z7,formRef:e.formRef,parent:e.parent,loadingStep:"continue"}),entry:"markFormAsProgressive",onDone:{actions:"unmarkFormAsProgressive"},initial:"Pending",states:{Pending:{tags:["state:pending"],description:"Waiting for user input",on:{SUBMIT:{guard:(0,c.G)(["hasMetPreviousMissingRequirements",(0,c.F)("isStatusMissingRequirements")]),target:"Attempting",reenter:!0}}},Attempting:{tags:["state:attempting","state:loading"],entry:"sendToLoading",invoke:{id:"attempt",src:"attempt",input:({context:e})=>({parent:e.parent,fields:e.formRef.getSnapshot().context.fields}),onDone:{actions:["sendToNext","sendToLoading"]},onError:{actions:["setFormErrors","sendToLoading"],target:"Pending"}}}}}),I=["emailAddress","phoneNumber"],P=["firstName","lastName","emailAddress","username","phoneNumber"],C=(0,p.cY)({actors:{attempt:(0,g.p4)(({input:{fields:e,parent:t,params:r}})=>{let n=S(e);return t.getSnapshot().context.clerk.client.signUp.create({...n,...r})}),attemptWeb3:(0,g.p4)(({input:{parent:e,strategy:t}})=>{if("web3_metamask_signature"===t)return e.getSnapshot().context.clerk.client.signUp.authenticateWithMetamask();if("web3_coinbase_wallet_signature"===t)return e.getSnapshot().context.clerk.client.signUp.authenticateWithCoinbaseWallet();throw new i.sC(`Unsupported Web3 strategy: ${t}`)}),thirdParty:i.yb},actions:{sendToNext:({context:e,event:t})=>e.parent.send({type:"NEXT",resource:t.output}),sendToLoading:i.XN,setFormRef:(0,f.a)(({event:e})=>({formRef:e.formRef})),setFormDisabledTicketFields:(0,f.b)(({context:e,enqueue:t})=>{if(!e.ticket)return;let r=e.formRef.getSnapshot().context.fields;for(let n of I)r.has(n)&&t.sendTo(e.formRef,{type:"FIELD.DISABLE",field:{name:n}})}),setFormErrors:(0,f.c)(({context:e})=>e.formRef,({event:e})=>((0,i.Ff)(e),{type:"ERRORS.SET",error:e.error})),setDefaultFormValues:({context:e})=>{let t=e.parent.getSnapshot().context.clerk.client.signUp,r=new Map;for(let e of P)e in t&&r.set(e,t[e]);e.formRef.send({type:"PREFILL_DEFAULT_VALUES",defaultValues:r})}},guards:{isMissingRequirements:({context:e})=>{var t,r,n;return(null==(n=null==(r=null==(t=e.parent.getSnapshot().context.clerk)?void 0:t.client)?void 0:r.signUp)?void 0:n.status)==="missing_requirements"},hasTicket:({context:e})=>!!e.ticket,isExampleMode:({context:e})=>!!e.parent.getSnapshot().context.exampleMode},types:{}}).createMachine({id:"SignUpStart",context:({input:e})=>({basePath:e.basePath||i.z7,formRef:e.formRef,parent:e.parent,loadingStep:"start",ticket:e.ticket}),entry:"setDefaultFormValues",initial:"Init",on:{SET_FORM:{actions:"setFormRef"}},states:{Init:{description:"Handle ticket, if present; Else, default to Pending state. Per tickets, `Attempting` makes a `signUp.create` request allowing for an incomplete sign up to contain progressively filled fields on the Start step.",always:[{guard:(0,c.E)(["hasTicket","isMissingRequirements"]),target:"Pending"},{guard:"hasTicket",target:"Attempting"},{target:"Pending"}]},Pending:{tags:["state:pending"],description:"Waiting for user input",on:{SUBMIT:{guard:(0,c.F)("isExampleMode"),target:"Attempting",reenter:!0},"AUTHENTICATE.WEB3":{guard:(0,c.F)("isExampleMode"),target:"AttemptingWeb3",reenter:!0}}},Attempting:{tags:["state:attempting","state:loading"],entry:"sendToLoading",invoke:{id:"attemptCreate",src:"attempt",input:({context:e})=>{let t={fields:e.formRef.getSnapshot().context.fields,parent:e.parent},r=e.ticket?{strategy:"ticket",ticket:e.ticket}:{};return{...t,params:r}},onDone:{actions:["setFormDisabledTicketFields","sendToNext","sendToLoading"]},onError:{actions:["setFormDisabledTicketFields","setFormErrors","sendToLoading"],target:"Pending"}}},AttemptingWeb3:{tags:["state:attempting","state:loading"],entry:"sendToLoading",invoke:{id:"attemptCreateWeb3",src:"attemptWeb3",input:({context:e,event:t})=>((0,p.ZD)(t,"AUTHENTICATE.WEB3"),{parent:e.parent,strategy:t.strategy}),onDone:{actions:["sendToNext","sendToLoading"]},onError:{actions:["setFormErrors","sendToLoading"],target:"Pending"}}}}}),N=(e,t)=>{let r=[{type:"isFieldUnverified",params:{field:e}}];return t&&r.push({type:"isStrategyEnabled",params:{attribute:e,strategy:t}}),(0,c.E)(r)},U=(0,p.cY)({actors:{prepare:(0,g.p4)(({input:{params:e,parent:t}})=>{let r=t.getSnapshot().context.clerk;return"email_link"===e.strategy&&e.redirectUrl&&(e.redirectUrl=r.buildUrlWithAuth(e.redirectUrl)),r.client.signUp.prepareVerification(e)}),attempt:(0,g.p4)(async({input:{params:e,parent:t}})=>t.getSnapshot().context.clerk.client.signUp.attemptVerification(e)),attemptEmailLinkVerification:(0,g.E9)(({receive:e,sendBack:t,input:{parent:r}})=>{let{run:n,stop:a}=function({delayInMs:e}={delayInMs:1e3}){let t;let r=T(),n=!1,a=()=>{t&&(r.clearTimeout(t),r.cleanup()),n=!0},i=async s=>{n=!1,await s(a),n||(t=r.setTimeout(()=>{i(s)},e))};return{run:i,stop:a}}(),s=r.getSnapshot().context.clerk;return n(async()=>s.client.signUp.reload().then(e=>{let r=e.status,n=e.verifications.emailAddress.status;if("complete"===r)return t({type:"EMAIL_LINK.VERIFIED",resource:e});switch(n){case"verified":case"transferable":case"expired":t({type:`EMAIL_LINK.${n.toUpperCase()}`,resource:e});break;case"failed":t({type:"EMAIL_LINK.FAILED",error:new i.rD("email-link-verification-failed","Email verification failed"),resource:e});break;default:return}a()}).catch(e=>{a(),new i.sC(e)})),e(e=>{"STOP"===e.type&&a()}),()=>a()})},actions:{resendableTick:(0,f.a)(({context:e})=>({resendable:1===e.resendableAfter,resendableAfter:e.resendableAfter>1?e.resendableAfter-1:e.resendableAfter})),resendableReset:(0,f.a)({resendable:!1,resendableAfter:i.AP}),sendToLoading:i.XN,setFormErrors:(0,f.c)(({context:e})=>e.formRef,({event:e})=>((0,i.Ff)(e),{type:"ERRORS.SET",error:e.error}))},guards:{isComplete:({context:e})=>"complete"===e.resource.status,isFieldUnverified:({context:e,event:t},{field:r})=>{let n=e.resource;return(null==t?void 0:t.type)==="NEXT"&&t.resource&&(n=t.resource),n.unverifiedFields.includes(r)},isResendable:({context:e})=>e.resendable||0===e.resendableAfter,isStrategyEnabled:({context:e},{attribute:t,strategy:r})=>{var n;return!!(null==(n=e.attributes)?void 0:n[t].verifications.includes(r))},shouldVerifyPhoneCode:N("phone_number"),shouldVerifyEmailLink:N("email_address","email_link"),shouldVerifyEmailCode:N("email_address","email_code")},delays:{emailLinkTimeout:3e5,resendableTimeout:1e3},types:{}}).createMachine({id:"SignUpVerification",initial:"Init",context:({input:e})=>({attributes:e.attributes,basePath:e.basePath||i.z7,loadingStep:"verifications",formRef:e.formRef,parent:e.parent,resendable:!1,resendableAfter:i.AP,resource:e.resource}),on:{NEXT:[{guard:"isComplete",actions:(0,f.s)(({event:e})=>({type:"NEXT",resource:e.resource}))},{description:"Validate via phone number",guard:"shouldVerifyPhoneCode",target:".PhoneCode"},{description:"Validate via email link",guard:"shouldVerifyEmailLink",target:".EmailLink"},{description:"Verify via email code",guard:"shouldVerifyEmailCode",target:".EmailCode"},{actions:(0,f.s)(({event:e})=>({type:"NEXT",resource:e.resource}))}]},states:{Init:{always:[{description:"Validate via phone number",guard:"shouldVerifyPhoneCode",target:"PhoneCode"},{description:"Validate via email link",guard:"shouldVerifyEmailLink",target:"EmailLink"},{description:"Verify via email code",guard:"shouldVerifyEmailCode",target:"EmailCode"},{actions:(0,f.s)(({context:e})=>({type:"NEXT",resource:e.resource}))}]},EmailLink:{tags:["verification:method:email","verification:category:link","verification:email_link"],initial:"Preparing",on:{RETRY:".Preparing","EMAIL_LINK.RESTART":{target:".Attempting",reenter:!0},"EMAIL_LINK.FAILED":{actions:[{type:"setFormErrors",params:({event:e})=>({error:e.error})},(0,f.a)({resource:({event:e})=>e.resource})],target:".Pending"},"EMAIL_LINK.*":{actions:(0,f.b)(({enqueue:e,event:t})=>{"EMAIL_LINK.RESTART"!==t.type&&(e.assign({resource:t.resource}),e.raise({type:"NEXT",resource:t.resource}))})}},states:{Preparing:{tags:["state:preparing","state:loading"],exit:"resendableReset",invoke:{id:"prepareEmailLinkVerification",src:"prepare",input:({context:e})=>({parent:e.parent,params:{strategy:"email_link",redirectUrl:`${e.basePath}${i.zg}`}}),onDone:{target:"Attempting",actions:(0,f.a)({resource:({event:e})=>e.output})},onError:{actions:"setFormErrors",target:"Pending"}}},Pending:{description:"Placeholder for allowing resending of email link",tags:["state:pending"],on:{NEXT:"Preparing"}},Attempting:{tags:["state:attempting"],invoke:{id:"attemptEmailLinkVerification",src:"attemptEmailLinkVerification",input:({context:e})=>({parent:e.parent})},after:{emailLinkTimeout:{description:"Timeout after 5 minutes",target:"Pending",actions:(0,f.c)(({context:e})=>e.formRef,{type:"ERRORS.SET",error:new i.rD("verify-email-link-timeout","Email link verification timed out")})}},initial:"NotResendable",states:{Resendable:{description:"Waiting for user to retry"},NotResendable:{description:"Handle countdowns",on:{RETRY:{actions:(0,f.l)(({context:e})=>`Not retriable; Try again in ${e.resendableAfter}s`)}},after:{resendableTimeout:[{description:"Set as retriable if countdown is 0",guard:"isResendable",actions:"resendableTick",target:"Resendable"},{description:"Continue countdown if not retriable",actions:"resendableTick",target:"NotResendable",reenter:!0}]}}}}}},EmailCode:{tags:["verification:method:email","verification:category:code","verification:email_code"],initial:"Preparing",states:{Preparing:{tags:["state:preparing","state:loading"],exit:"resendableReset",invoke:{id:"prepareEmailAddressCodeVerification",src:"prepare",input:({context:e})=>({parent:e.parent,params:{strategy:"email_code"}}),onDone:[{guard:"shouldVerifyEmailCode",target:"Pending"},{actions:[(0,f.a)({resource:({event:e})=>e.output}),(0,c.O)(({event:e})=>({type:"NEXT",resource:e.output}))]}],onError:{actions:"setFormErrors",target:"Pending"}}},Pending:{tags:["state:pending"],on:{RETRY:"Preparing",SUBMIT:{target:"Attempting",reenter:!0}},initial:"NotResendable",states:{Resendable:{description:"Waiting for user to retry"},NotResendable:{description:"Handle countdowns",on:{RETRY:{actions:(0,f.l)(({context:e})=>`Not retriable; Try again in ${e.resendableAfter}s`)}},after:{resendableTimeout:[{description:"Set as retriable if countdown is 0",guard:"isResendable",actions:"resendableTick",target:"Resendable"},{description:"Continue countdown if not retriable",actions:"resendableTick",target:"NotResendable",reenter:!0}]}}}},Attempting:{tags:["state:attempting","state:loading"],entry:"sendToLoading",invoke:{id:"attemptEmailAddressCodeVerification",src:"attempt",input:({context:e})=>{var t;return{parent:e.parent,params:{strategy:"email_code",code:(null==(t=e.formRef.getSnapshot().context.fields.get("code"))?void 0:t.value)||""}}},onDone:{actions:[(0,c.O)(({event:e})=>({type:"NEXT",resource:e.output})),"sendToLoading"]},onError:{actions:["setFormErrors","sendToLoading"],target:"Pending"}}}}},PhoneCode:{tags:["verification:method:phone","verification:category:code","verification:phone_code"],initial:"Preparing",states:{Preparing:{tags:["state:preparing","state:loading"],exit:"resendableReset",invoke:{id:"preparePhoneCodeVerification",src:"prepare",input:({context:e})=>({parent:e.parent,params:{strategy:"phone_code"}}),onDone:[{guard:"shouldVerifyPhoneCode",target:"Pending",actions:(0,f.a)({resource:({event:e})=>e.output})},{actions:[(0,f.a)({resource:({event:e})=>e.output}),(0,c.O)(({event:e})=>({type:"NEXT",resource:e.output}))]}],onError:{actions:"setFormErrors",target:"Pending"}}},Pending:{tags:["state:pending"],on:{RETRY:"Preparing",SUBMIT:{target:"Attempting",reenter:!0}},initial:"NotResendable",states:{Resendable:{description:"Waiting for user to retry"},NotResendable:{description:"Handle countdowns",on:{RETRY:{actions:(0,f.l)(({context:e})=>`Not retriable; Try again in ${e.resendableAfter}s`)}},after:{resendableTimeout:[{description:"Set as retriable if countdown is 0",guard:"isResendable",actions:"resendableTick",target:"Resendable"},{description:"Continue countdown if not retriable",actions:"resendableTick",target:"NotResendable",reenter:!0}]}}}},Attempting:{tags:["state:attempting","state:loading"],entry:"sendToLoading",invoke:{id:"attemptPhoneNumberVerification",src:"attempt",input:({context:e})=>{var t;return{parent:e.parent,params:{strategy:"phone_code",code:(null==(t=e.formRef.getSnapshot().context.fields.get("code"))?void 0:t.value)||""}}},onDone:{actions:[(0,c.O)(({event:e})=>({type:"NEXT",resource:e.output})),"sendToLoading"]},onError:{actions:["setFormErrors","sendToLoading"],target:"Pending"}}}}}}}),_=e=>({context:t},r)=>{var n,a;return null!=(a=null==(n=t.router)?void 0:n.match(e))&&a},L=e=>({context:t,event:r},n)=>{var a,i,s,o;return(null==(a=null==r?void 0:r.resource)?void 0:a.status)===e||(null==(o=null==(s=null==(i=t.clerk)?void 0:i.client)?void 0:s.signUp)?void 0:o.status)===e},M=(0,p.cY)({actors:{continueMachine:A,startMachine:C,thirdPartyMachine:i.yb,verificationMachine:U},actions:{clearFormErrors:(0,f.c)(({context:e})=>e.formRef,{type:"ERRORS.CLEAR"}),logUnknownError:e=>console.error("Unknown error:",e),navigateInternal:({context:e},{path:t,force:r=!1})=>{if(!e.router||!r&&(0,i.g4)()||e.exampleMode)return;let n=(0,m.xn)(e.router.basePath,t);n!==e.router.pathname()&&e.router.shallowPush(n)},navigateExternal:({context:e},{path:t})=>{var r;return null==(r=e.router)?void 0:r.push(t)},raiseNext:(0,c.O)({type:"NEXT"}),setActive:({context:e,event:t},r)=>{var n;if(e.exampleMode)return;let a=(null==r?void 0:r.sessionId)||(null==r?void 0:r.useLastActiveSession)&&e.clerk.client.lastActiveSessionId||((null==t?void 0:t.resource)||e.clerk.client.signUp).createdSessionId;e.clerk.setActive({session:a,redirectUrl:(null==(n=e.router)?void 0:n.searchParams().get("redirect_url"))||e.clerk.buildAfterSignUpUrl()})},delayedReset:(0,c.O)({type:"RESET"},{delay:3e3}),setError:(0,f.a)({error:(e,{error:t})=>t||new i.sC("Unknown error")}),setFormOAuthErrors:({context:e})=>{let t;let r=e.clerk.client.signIn.firstFactorVerification.error;if(r){switch(r.code){case i.O1.NOT_ALLOWED_TO_SIGN_UP:case i.O1.OAUTH_ACCESS_DENIED:case i.O1.NOT_ALLOWED_ACCESS:case i.O1.SAML_USER_ATTRIBUTE_MISSING:case i.O1.OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML:case i.O1.USER_LOCKED:t=new i.rD(r.code,r.longMessage);break;default:t=new i.rD("unable_to_complete","Unable to complete action at this time. If the problem persists please contact support.")}e.formRef.send({type:"ERRORS.SET",error:t})}},transfer:({context:e})=>{var t;return null==(t=e.router)?void 0:t.push(e.clerk.buildSignInUrl())}},guards:{areFieldsMissing:({context:e})=>{var t,r,n,a;return(null==(a=null==(n=null==(r=null==(t=e.clerk)?void 0:t.client)?void 0:r.signUp)?void 0:n.missingFields)?void 0:a.length)>0},areFieldsUnverified:({context:e})=>{var t,r,n,a;return(null==(a=null==(n=null==(r=null==(t=e.clerk)?void 0:t.client)?void 0:r.signUp)?void 0:n.unverifiedFields)?void 0:a.length)>0},hasAuthenticatedViaClerkJS:({context:e})=>!!(null===e.clerk.client.signUp.status&&e.clerk.client.lastActiveSessionId),hasCreatedSession:({context:e})=>{var t;return!!(null==(t=e.router)?void 0:t.searchParams().get(i.AQ.createdSession))},hasClerkStatus:({context:e},t)=>{var r;let n=null==(r=e.router)?void 0:r.searchParams().get(i.AQ.status);return t?n===t.status:!!n},hasClerkTransfer:({context:e})=>{var t;return!!(null==(t=e.router)?void 0:t.searchParams().get(i.AQ.transfer))},hasResource:({context:e})=>!!e.clerk.client.signUp,hasTicket:({context:e})=>!!e.ticket,isLoggedInAndSingleSession:(0,c.E)(["isLoggedIn","isSingleSessionMode",(0,c.F)("isExampleMode")]),isStatusAbandoned:L("abandoned"),isStatusComplete:({context:e,event:t})=>{var r,n;let a=null==t?void 0:t.resource,i=null==(n=null==(r=e.clerk)?void 0:r.client)?void 0:n.signUp;return(null==a?void 0:a.status)==="complete"&&!!(null==a?void 0:a.createdSessionId)||(null==i?void 0:i.status)==="complete"&&!!(null==i?void 0:i.createdSessionId)},isStatusMissingRequirements:L("missing_requirements"),isLoggedIn:(0,c.G)(["isStatusComplete",({context:e})=>!!e.clerk.user]),isSingleSessionMode:({context:e})=>{var t,r;return!!(null==(r=null==(t=e.clerk)?void 0:t.__unstable__environment)?void 0:r.authConfig.singleSessionMode)},isRestricted:({context:e})=>{var t,r;return(null==(r=null==(t=e.clerk)?void 0:t.__unstable__environment)?void 0:r.userSettings.signUp.mode)===i.ci.RESTRICTED},isRestrictedWithoutTicket:(0,c.E)(["isRestricted",(0,c.F)("hasTicket")]),isExampleMode:({context:e})=>!!e.exampleMode,isMissingRequiredFields:(0,c.E)(["isStatusMissingRequirements","areFieldsMissing"]),isMissingRequiredUnverifiedFields:(0,c.E)(["isStatusMissingRequirements","areFieldsUnverified"]),needsIdentifier:(0,c.G)(["statusNeedsIdentifier",_("/")]),needsContinue:(0,c.E)(["statusNeedsContinue",_("/continue")]),needsVerification:(0,c.E)(["statusNeedsVerification",_("/verify")]),needsCallback:_(i.X8),statusNeedsIdentifier:(0,c.G)([(0,c.F)("hasResource"),"isStatusAbandoned"]),statusNeedsContinue:(0,c.G)(["isMissingRequiredFields"]),statusNeedsVerification:(0,c.G)(["isMissingRequiredUnverifiedFields",(0,c.E)(["areFieldsMissing","hasClerkStatus"])])},delays:{"TIMEOUT.POLLING":3e5},types:{}}).createMachine({id:"SignUpRouter",context:{},initial:"Idle",on:{"AUTHENTICATE.OAUTH":{actions:(0,f.c)(i.M8,({context:e,event:t})=>{var r,n,a,s;return{type:"REDIRECT",params:{strategy:t.strategy,redirectUrl:`${(null==(r=e.router)?void 0:r.mode)===i.OE.virtual?null==(n=e.clerk.__unstable__environment)?void 0:n.displayConfig.signUpUrl:null==(a=e.router)?void 0:a.basePath}${i.X8}`,redirectUrlComplete:(null==(s=e.router)?void 0:s.searchParams().get("redirect_url"))||e.clerk.buildAfterSignUpUrl()}}})},"AUTHENTICATE.SAML":{actions:(0,f.c)(i.M8,({context:e})=>{var t,r,n,a,s;return{type:"REDIRECT",params:{strategy:"saml",emailAddress:null==(t=e.formRef.getSnapshot().context.fields.get("emailAddress"))?void 0:t.value,redirectUrl:`${(null==(r=e.router)?void 0:r.mode)===i.OE.virtual?null==(n=e.clerk.__unstable__environment)?void 0:n.displayConfig.signUpUrl:null==(a=e.router)?void 0:a.basePath}${i.X8}`,redirectUrlComplete:(null==(s=e.router)?void 0:s.searchParams().get("redirect_url"))||e.clerk.buildAfterSignUpUrl()}}})},"AUTHENTICATE.WEB3":{actions:(0,f.c)("start",({event:e})=>e)},"FORM.ATTACH":{description:"Attach/re-attach the form to the router.",actions:(0,f.b)(({enqueue:e,event:t})=>{e.assign({formRef:t.formRef}),e.raise({type:"RESET.STEP"})})},"NAVIGATE.PREVIOUS":".Hist","NAVIGATE.START":".Start",LOADING:{actions:(0,f.a)(({event:e})=>({loading:{isLoading:e.isLoading,step:e.step,strategy:e.strategy,action:e.action}}))},RESET:".Idle"},states:{Idle:{on:{INIT:{actions:(0,f.a)(({event:e})=>{var t;let r=null==(t=e.router)?void 0:t.searchParams();return{clerk:e.clerk,router:e.router,signInPath:e.signInPath||i.XU,loading:{isLoading:!1},exampleMode:e.exampleMode||!1,formRef:e.formRef,ticket:(null==r?void 0:r.get(i.AQ.ticket))||(null==r?void 0:r.get(i.AQ.invitationToken))||void 0}}),target:"Init"}}},Init:{entry:(0,f.b)(({context:e,enqueue:t,self:r})=>{var n,a;r.getSnapshot().children[i.M8]||t.spawnChild("thirdPartyMachine",{id:i.M8,systemId:i.M8,input:{basePath:null!=(a=null==(n=e.router)?void 0:n.basePath)?a:i.z7,flow:"signUp",formRef:e.formRef,parent:r}})}),always:[{guard:"isLoggedInAndSingleSession",actions:[(0,f.l)("Already logged in"),{type:"navigateExternal",params:({context:e})=>{var t;return{path:(null==(t=e.router)?void 0:t.searchParams().get("redirect_url"))||e.clerk.buildAfterSignUpUrl()}}}]},{guard:"needsCallback",target:"Callback"},{guard:"hasTicket",actions:{type:"navigateInternal",params:{force:!0,path:"/"}},target:"Start"},{guard:"needsVerification",actions:{type:"navigateInternal",params:{force:!0,path:"/verify"}},target:"Verification"},{guard:(0,c.G)(["needsContinue","hasClerkTransfer"]),actions:{type:"navigateInternal",params:{force:!0,path:"/continue"}},target:"Continue"},{guard:"isRestrictedWithoutTicket",target:"Restricted"},{actions:{type:"navigateInternal",params:{force:!0,path:"/"}},target:"Start"}]},Start:{tags:["step:start"],exit:"clearFormErrors",invoke:{id:"start",src:"startMachine",input:({context:e,self:t})=>{var r;return{basePath:null==(r=e.router)?void 0:r.basePath,formRef:e.formRef,parent:t,ticket:e.ticket}},onDone:{actions:"raiseNext"}},on:{"RESET.STEP":{actions:(0,f.b)(({enqueue:e,context:t})=>{e("clearFormErrors"),e.sendTo("start",{type:"SET_FORM",formRef:t.formRef})})},NEXT:[{guard:"isStatusComplete",actions:["setActive","delayedReset"]},{guard:(0,c.E)(["hasTicket","statusNeedsContinue"]),actions:{type:"navigateInternal",params:{path:"/"}},target:"Start",reenter:!0},{guard:"statusNeedsVerification",target:"Verification",actions:{type:"navigateInternal",params:{path:"/verify"}}},{guard:"statusNeedsContinue",actions:{type:"navigateInternal",params:{path:"/continue"}},target:"Continue"}]}},Continue:{tags:["step:continue"],invoke:{id:"continue",src:"continueMachine",input:({context:e,self:t})=>{var r;return{basePath:null==(r=e.router)?void 0:r.basePath,formRef:e.formRef,parent:t}},onDone:{actions:"raiseNext"}},on:{"RESET.STEP":{target:"Continue",reenter:!0},NEXT:[{guard:"isStatusComplete",actions:["setActive","delayedReset"]},{guard:"statusNeedsVerification",target:"Verification",actions:{type:"navigateInternal",params:{path:"/verify"}}}]}},Verification:{tags:["step:verification"],invoke:{id:"verification",src:"verificationMachine",input:({context:e,self:t})=>{var r,n;return{attributes:null==(r=e.clerk.__unstable__environment)?void 0:r.userSettings.attributes,basePath:null==(n=e.router)?void 0:n.basePath,formRef:e.formRef,parent:t,resource:e.clerk.client.signUp}},onDone:{actions:"raiseNext"}},always:[{guard:"hasCreatedSession",actions:[({context:e})=>{var t;return{type:"setActive",params:{sessionId:null==(t=e.router)?void 0:t.searchParams().get(i.AQ.createdSession)}}},"delayedReset"]},{guard:{type:"hasClerkStatus",params:{status:"verified"}},actions:{type:"navigateInternal",params:{force:!0,path:"/continue"}}},{guard:{type:"hasClerkStatus",params:{status:"expired"}},actions:{type:"navigateInternal",params:{force:!0,path:"/"}}}],on:{"RESET.STEP":{target:"Verification",reenter:!0},NEXT:[{guard:"isStatusComplete",actions:["setActive","delayedReset"]},{guard:"statusNeedsContinue",actions:{type:"navigateInternal",params:{path:"/continue"}},target:"Continue"}]}},Callback:{tags:["step:callback"],entry:(0,f.c)(i.M8,{type:"CALLBACK"}),on:{NEXT:[{guard:"isStatusComplete",actions:["setActive","delayedReset"]},{description:"Handle a case where the user has already been authenticated via ClerkJS",guard:"hasAuthenticatedViaClerkJS",actions:[{type:"setActive",params:{useLastActiveSession:!0}},"delayedReset"]},{guard:"statusNeedsVerification",actions:{type:"navigateInternal",params:{path:"/verify"}},target:"Verification"},{guard:"statusNeedsContinue",actions:{type:"navigateInternal",params:{path:"/continue"}},target:"Continue"},{actions:{type:"navigateInternal",params:{path:"/"}},target:"Start"}]}},Restricted:{tags:["step:restricted"],on:{NEXT:"Start"}},Error:{tags:["step:error"],on:{NEXT:{target:"Start",actions:"clearFormErrors"}}},Hist:{type:"history",exit:"clearFormErrors"}}}),w=(0,c.A)(M,{inspect:i.XY});function F({children:e,exampleMode:t,fallback:r,isRootPath:a}){let o=(0,s.cL)(),c=(0,n.nP)(),u=(0,i.VW)(),p=(0,l.v9)(w,e=>"Idle"!==e.value);return(0,d.useEffect)(()=>{if(!o||!c)return;let e=()=>{let e={type:"INIT",clerk:o,exampleMode:t,formRef:u,router:c,signInPath:i.XU};w.getSnapshot().can(e)&&w.send(e),u&&w.getSnapshot().can({type:"RESET.STEP"})&&w.send({type:"FORM.ATTACH",formRef:u})};"addOnLoaded"in o?o.addOnLoaded(e):e()},[o,t,null==u?void 0:u.id,!!c,o.loaded]),(0,y.jsxs)(i.J2.Provider,{actorRef:w,children:[a&&!p&&r?(0,y.jsx)(i.l0,{children:r}):null,o.loaded&&p?e:null]})}function x({children:e,exampleMode:t=!1,fallback:r=null,path:l,routing:d=i.OE.path}){var c,u;let p=(0,s.cL)(),g=(d===i.OE.virtual?a.cv:a.Ms)(),m=g.pathname(),f=null==(c=g.inferredBasePath)?void 0:c.call(g),v=l||f||i.z7,h=v===m;return null==(u=p.telemetry)||u.record((0,o.Zg)("Elements_SignUpRoot",{exampleMode:t,fallback:!!r,path:v,routing:d})),(0,y.jsx)(n._t.Provider,{value:g,children:(0,y.jsx)(n.F0,{basePath:v,children:(0,y.jsx)(i.B$,{children:(0,y.jsx)(F,{exampleMode:t,fallback:r,isRootPath:h,children:e})})})})}w.start();var V={start:"NAVIGATE.START",previous:"NAVIGATE.PREVIOUS"},O=d.forwardRef(({asChild:e,to:t,...r},n)=>{let a=i.J2.useActorRef(),s=e?R.g7:"button",o=d.useCallback(()=>{let e=V[t];a.getSnapshot().can({type:e})?a.send({type:e}):console.warn(`Clerk: <SignUp.Action navigate="${t}"> is an invalid navigation event. You can only navigate to: ${Object.keys(V).join(", ")}.`)},[a,t]);return(0,y.jsx)(s,{...e?{}:{type:"button"},...r,onClick:o,ref:n})});O.displayName="SignInNavigate";var D=d.forwardRef(({asChild:e,fallback:t,...r},n)=>{let a=i.JD.useActorRef(!0);if(!a)throw Error('The resend action must be used within <SignUp.Step name="verifications">.');let s=(0,l.v9)(a,e=>({resendable:e.context.resendable,resendableAfter:e.context.resendableAfter}),(e,t)=>e.resendableAfter===t.resendableAfter&&e.resendable===t.resendable);if(t&&!s.resendable)return"function"==typeof t?t(s):t;let o=e?R.g7:"button";return(0,y.jsx)(o,{...e?{}:{type:"button"},...r,disabled:!s.resendable,onClick:()=>a.send({type:"RETRY"}),ref:n})});D.displayName="SignUpResend";var X=d.forwardRef((e,t)=>{let r;let{submit:n,navigate:a,resend:s,...o}=e;return n?r=i.k4:a?r=O:s&&(r=D),r?(0,y.jsx)(r,{to:a,...o,ref:t}):null});X.displayName="SignUpAction";var W=d.forwardRef(({asChild:e,children:t,...r},n)=>{if(!i.MP.useActorRef(!0))throw new i.sC('<Captcha> must be used within the <SignUp.Step name="start"> component.');let a=e?R.g7:"div";return(0,y.jsx)(a,{id:i.Mc,...r,ref:n})})}}]);